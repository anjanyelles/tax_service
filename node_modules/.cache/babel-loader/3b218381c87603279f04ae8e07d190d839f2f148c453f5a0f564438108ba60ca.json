{"ast":null,"code":"import React,{useState}from\"react\";import axios from\"axios\";import{Button,Typography,Snackbar,Paper}from\"@material-ui/core\";import MuiAlert from\"@material-ui/lab/Alert\";import{makeStyles}from\"@material-ui/core/styles\";import CloudUploadIcon from\"@material-ui/icons/CloudUpload\";import GridContainer from\"components/Grid/GridContainer.js\";import GridItem from\"components/Grid/GridItem.js\";import Card from\"components/Card/Card.js\";import CardHeader from\"components/Card/CardHeader.js\";import CardBody from\"components/Card/CardBody.js\";import styles from\"assets/jss/material-dashboard-react/views/dashboardStyle.js\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const useStyles=makeStyles(theme=>({...styles,dropZone:{border:\"2px dashed #ccc\",padding:\"30px\",textAlign:\"center\",cursor:\"pointer\",color:\"#888\",marginBottom:\"20px\",backgroundColor:\"#fafafa\"},input:{display:\"none\"},icon:{fontSize:\"40px\",marginBottom:\"10px\",color:\"#00acc1\"}}));function Alert(props){return/*#__PURE__*/_jsx(MuiAlert,{elevation:6,variant:\"filled\",...props});}export default function Bulkupload(){const classes=useStyles();const[file,setFile]=useState(null);const[uploadResult,setUploadResult]=useState(null);const[snackbar,setSnackbar]=useState({open:false,severity:\"info\",message:\"\"});const handleFileUpload=async selectedFile=>{if(!selectedFile)return;const formData=new FormData();formData.append(\"file\",selectedFile);try{const res=await axios.post(\"https://asoft.click/api/incometax-service/leads/upload-leads-excel\",formData,{headers:{\"Content-Type\":\"multipart/form-data\"}});setUploadResult(res.data);setSnackbar({open:true,severity:\"success\",message:`Upload Successful: ${res.data.saved_records} saved, ${res.data.skipped_duplicates} duplicates.`});}catch(error){setSnackbar({open:true,severity:\"error\",message:\"Upload failed. Please try again.\"});}};const handleDrop=event=>{event.preventDefault();if(event.dataTransfer.files&&event.dataTransfer.files.length>0){const droppedFile=event.dataTransfer.files[0];setFile(droppedFile);handleFileUpload(droppedFile);event.dataTransfer.clearData();}};const handleFileSelect=event=>{const selected=event.target.files[0];setFile(selected);handleFileUpload(selected);};const handleCloseSnackbar=()=>{setSnackbar({...snackbar,open:false});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(GridContainer,{children:/*#__PURE__*/_jsx(GridItem,{xs:12,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsxs(CardHeader,{color:\"info\",children:[/*#__PURE__*/_jsx(\"h4\",{className:classes.cardTitleWhite,children:\"Bulk Upload Leads\"}),/*#__PURE__*/_jsx(\"p\",{className:classes.cardCategoryWhite,children:\"Upload leads via Excel file (.xlsx or .xls)\"})]}),/*#__PURE__*/_jsxs(CardBody,{children:[/*#__PURE__*/_jsxs(Paper,{className:classes.dropZone,onDrop:handleDrop,onDragOver:e=>e.preventDefault(),children:[/*#__PURE__*/_jsx(CloudUploadIcon,{className:classes.icon}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",children:\"Drag & drop Excel file here, or click to select\"}),/*#__PURE__*/_jsx(\"input\",{className:classes.input,id:\"file-input\",type:\"file\",accept:\".xlsx,.xls\",onChange:handleFileSelect}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"file-input\",children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",component:\"span\",style:{marginTop:\"10px\"},children:\"Choose File\"})})]}),file&&/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[\"Selected file: \",/*#__PURE__*/_jsx(\"strong\",{children:file.name})]}),uploadResult&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:\"20px\"},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Status:\"}),\" \",uploadResult.status]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Total Records:\"}),\" \",uploadResult.total_records]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Saved Records:\"}),\" \",uploadResult.saved_records]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Skipped Duplicates:\"}),\" \",uploadResult.skipped_duplicates]})]})]})]})})}),/*#__PURE__*/_jsx(Snackbar,{open:snackbar.open,autoHideDuration:5000,onClose:handleCloseSnackbar,children:/*#__PURE__*/_jsx(Alert,{severity:snackbar.severity,onClose:handleCloseSnackbar,children:snackbar.message})})]});}","map":{"version":3,"names":["React","useState","axios","Button","Typography","Snackbar","Paper","MuiAlert","makeStyles","CloudUploadIcon","GridContainer","GridItem","Card","CardHeader","CardBody","styles","jsx","_jsx","jsxs","_jsxs","useStyles","theme","dropZone","border","padding","textAlign","cursor","color","marginBottom","backgroundColor","input","display","icon","fontSize","Alert","props","elevation","variant","Bulkupload","classes","file","setFile","uploadResult","setUploadResult","snackbar","setSnackbar","open","severity","message","handleFileUpload","selectedFile","formData","FormData","append","res","post","headers","data","saved_records","skipped_duplicates","error","handleDrop","event","preventDefault","dataTransfer","files","length","droppedFile","clearData","handleFileSelect","selected","target","handleCloseSnackbar","children","xs","className","cardTitleWhite","cardCategoryWhite","onDrop","onDragOver","e","id","type","accept","onChange","htmlFor","component","style","marginTop","name","status","total_records","autoHideDuration","onClose"],"sources":["/Users/anjanyelle/Desktop/tax/taxserves_react_crm_dashboard/src/components/Bulkupload/Bulkupload.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport {\r\n  Button,\r\n  Typography,\r\n  Snackbar,\r\n  Paper,\r\n} from \"@material-ui/core\";\r\n\r\nimport MuiAlert from \"@material-ui/lab/Alert\";\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport CloudUploadIcon from \"@material-ui/icons/CloudUpload\";\r\n\r\nimport GridContainer from \"components/Grid/GridContainer.js\";\r\nimport GridItem from \"components/Grid/GridItem.js\";\r\nimport Card from \"components/Card/Card.js\";\r\nimport CardHeader from \"components/Card/CardHeader.js\";\r\nimport CardBody from \"components/Card/CardBody.js\";\r\n\r\nimport styles from \"assets/jss/material-dashboard-react/views/dashboardStyle.js\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  ...styles,\r\n  dropZone: {\r\n    border: \"2px dashed #ccc\",\r\n    padding: \"30px\",\r\n    textAlign: \"center\",\r\n    cursor: \"pointer\",\r\n    color: \"#888\",\r\n    marginBottom: \"20px\",\r\n    backgroundColor: \"#fafafa\",\r\n  },\r\n  input: {\r\n    display: \"none\",\r\n  },\r\n  icon: {\r\n    fontSize: \"40px\",\r\n    marginBottom: \"10px\",\r\n    color: \"#00acc1\",\r\n  },\r\n}));\r\n\r\nfunction Alert(props) {\r\n  return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\r\n}\r\n\r\nexport default function Bulkupload() {\r\n  const classes = useStyles();\r\n  const [file, setFile] = useState(null);\r\n  const [uploadResult, setUploadResult] = useState(null);\r\n  const [snackbar, setSnackbar] = useState({ open: false, severity: \"info\", message: \"\" });\r\n\r\n  const handleFileUpload = async (selectedFile) => {\r\n    if (!selectedFile) return;\r\n    const formData = new FormData();\r\n    formData.append(\"file\", selectedFile);\r\n\r\n    try {\r\n      const res = await axios.post(\r\n        \"https://asoft.click/api/incometax-service/leads/upload-leads-excel\",\r\n        formData,\r\n        {\r\n          headers: { \"Content-Type\": \"multipart/form-data\" },\r\n        }\r\n      );\r\n      setUploadResult(res.data);\r\n      setSnackbar({\r\n        open: true,\r\n        severity: \"success\",\r\n        message: `Upload Successful: ${res.data.saved_records} saved, ${res.data.skipped_duplicates} duplicates.`,\r\n      });\r\n    } catch (error) {\r\n      setSnackbar({\r\n        open: true,\r\n        severity: \"error\",\r\n        message: \"Upload failed. Please try again.\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleDrop = (event) => {\r\n    event.preventDefault();\r\n    if (event.dataTransfer.files && event.dataTransfer.files.length > 0) {\r\n      const droppedFile = event.dataTransfer.files[0];\r\n      setFile(droppedFile);\r\n      handleFileUpload(droppedFile);\r\n      event.dataTransfer.clearData();\r\n    }\r\n  };\r\n\r\n  const handleFileSelect = (event) => {\r\n    const selected = event.target.files[0];\r\n    setFile(selected);\r\n    handleFileUpload(selected);\r\n  };\r\n\r\n  const handleCloseSnackbar = () => {\r\n    setSnackbar({ ...snackbar, open: false });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <GridContainer>\r\n        <GridItem xs={12}>\r\n          <Card>\r\n            <CardHeader color=\"info\">\r\n              <h4 className={classes.cardTitleWhite}>Bulk Upload Leads</h4>\r\n              <p className={classes.cardCategoryWhite}>\r\n                Upload leads via Excel file (.xlsx or .xls)\r\n              </p>\r\n            </CardHeader>\r\n            <CardBody>\r\n              <Paper\r\n                className={classes.dropZone}\r\n                onDrop={handleDrop}\r\n                onDragOver={(e) => e.preventDefault()}\r\n              >\r\n                <CloudUploadIcon className={classes.icon} />\r\n                <Typography variant=\"body1\">\r\n                  Drag & drop Excel file here, or click to select\r\n                </Typography>\r\n                <input\r\n                  className={classes.input}\r\n                  id=\"file-input\"\r\n                  type=\"file\"\r\n                  accept=\".xlsx,.xls\"\r\n                  onChange={handleFileSelect}\r\n                />\r\n                <label htmlFor=\"file-input\">\r\n                  <Button variant=\"contained\" color=\"primary\" component=\"span\" style={{ marginTop: \"10px\" }}>\r\n                    Choose File\r\n                  </Button>\r\n                </label>\r\n              </Paper>\r\n\r\n              {file && (\r\n                <Typography variant=\"body2\">\r\n                  Selected file: <strong>{file.name}</strong>\r\n                </Typography>\r\n              )}\r\n\r\n              {uploadResult && (\r\n                <div style={{ marginTop: \"20px\" }}>\r\n                  <Typography variant=\"body2\">\r\n                    <strong>Status:</strong> {uploadResult.status}\r\n                  </Typography>\r\n                  <Typography variant=\"body2\">\r\n                    <strong>Total Records:</strong> {uploadResult.total_records}\r\n                  </Typography>\r\n                  <Typography variant=\"body2\">\r\n                    <strong>Saved Records:</strong> {uploadResult.saved_records}\r\n                  </Typography>\r\n                  <Typography variant=\"body2\">\r\n                    <strong>Skipped Duplicates:</strong> {uploadResult.skipped_duplicates}\r\n                  </Typography>\r\n                </div>\r\n              )}\r\n            </CardBody>\r\n          </Card>\r\n        </GridItem>\r\n      </GridContainer>\r\n\r\n      <Snackbar\r\n        open={snackbar.open}\r\n        autoHideDuration={5000}\r\n        onClose={handleCloseSnackbar}\r\n      >\r\n        <Alert severity={snackbar.severity} onClose={handleCloseSnackbar}>\r\n          {snackbar.message}\r\n        </Alert>\r\n      </Snackbar>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}